

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script defer data-domain="control.ros.org" src="https://plausible.io/js/script.js"></script>
  
  <title>diff_drive_controller &mdash; ROS2_Control: Rolling Feb 2023 documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/override.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../../_static/favicon_ros-controls.ico"/>
  

  
  

  
    <link rel="canonical" href="https://control.ros.org/rolling//rolling/doc/ros2_controllers/diff_drive_controller/doc/userdoc.html" />

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/sphinx_highlight.js"></script>
        <script src="../../../../_static/clipboard.min.js"></script>
        <script src="../../../../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="forward_command_controller" href="../../forward_command_controller/doc/userdoc.html" />
    <link rel="prev" title="Writing a new controller" href="../../doc/writing_new_controller.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html">
          

          
            
            <img src="../../../../_static/logo_ros-controls.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/getting_started.html#architecture">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/getting_started.html#hardware-components">Hardware Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ros2_control/doc/index.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ros2_control/doc/index.html#core-functionalities">Core functionalities</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../doc/controllers_index.html">ros2_controllers</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../doc/controllers_index.html#nomenclature">Nomenclature</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../doc/controllers_index.html#guidelines-and-best-practices">Guidelines and Best Practices</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../doc/controllers_index.html#available-controllers">Available Controllers</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Differential Drive</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#velocity-commands">Velocity commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hardware-interface-type">Hardware interface type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#other-features">Other features</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ros2-control-interfaces">ros2_control Interfaces</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#references">References</a></li>
<li class="toctree-l5"><a class="reference internal" href="#states">States</a></li>
<li class="toctree-l5"><a class="reference internal" href="#commands">Commands</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#ros2-interfaces">ROS2 Interfaces</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#subscribers">Subscribers</a></li>
<li class="toctree-l5"><a class="reference internal" href="#publishers">Publishers</a></li>
<li class="toctree-l5"><a class="reference internal" href="#services">Services</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../forward_command_controller/doc/userdoc.html">Forward Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../joint_trajectory_controller/doc/userdoc.html">Joint Trajectory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../position_controllers/doc/userdoc.html">Position Controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../velocity_controllers/doc/userdoc.html">Velocity Controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../effort_controllers/doc/userdoc.html">Effort Controllers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../doc/controllers_index.html#available-broadcasters">Available Broadcasters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../ros2_control/ros2controlcli/doc/userdoc.html">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../differences_to_ros1/differences_to_ros1.html">Differences to ros_control (ROS1)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../differences_to_ros1/differences_to_ros1.html#migration-guide-to-ros2-control">Migration Guide to ros2_control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ros2_control_demos/doc/index.html">Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../supported_robots/supported_robots.html">Supported Robots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../resources/resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../project_ideas.html">Project Ideas for GSoC 2022</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../acknowledgements/acknowledgements.html">Acknowledgements</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">ROS2_Control: Rolling</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../doc/controllers_index.html">ros2_controllers</a> &raquo;</li>
        
      <li>diff_drive_controller</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/ros-controls/control.ros.org/blob/master//doc/ros2_controllers/diff_drive_controller/doc/userdoc.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="diff-drive-controller">
<span id="diff-drive-controller-userdoc"></span><h1>diff_drive_controller<a class="headerlink" href="#diff-drive-controller" title="Permalink to this heading">¶</a></h1>
<p>Controller for mobile robots with differential drive.
Input for control are robot body velocity commands which are translated to wheel commands for the differential drive base.
Odometry is computed from hardware feedback and published.</p>
<section id="velocity-commands">
<h2>Velocity commands<a class="headerlink" href="#velocity-commands" title="Permalink to this heading">¶</a></h2>
<p>The controller works with a velocity twist from which it extracts the x component of the linear velocity and the z component of the angular velocity. Velocities on other components are ignored.</p>
</section>
<section id="hardware-interface-type">
<h2>Hardware interface type<a class="headerlink" href="#hardware-interface-type" title="Permalink to this heading">¶</a></h2>
<p>The controller works with wheel joints through a velocity interface.</p>
</section>
<section id="other-features">
<h2>Other features<a class="headerlink" href="#other-features" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><p>Realtime-safe implementation.
Odometry publishing
Task-space velocity, acceleration and jerk limits
Automatic stop after command time-out</p>
</div></blockquote>
</section>
<section id="ros2-control-interfaces">
<h2>ros2_control Interfaces<a class="headerlink" href="#ros2-control-interfaces" title="Permalink to this heading">¶</a></h2>
<section id="references">
<h3>References<a class="headerlink" href="#references" title="Permalink to this heading">¶</a></h3>
</section>
<section id="states">
<h3>States<a class="headerlink" href="#states" title="Permalink to this heading">¶</a></h3>
</section>
<section id="commands">
<h3>Commands<a class="headerlink" href="#commands" title="Permalink to this heading">¶</a></h3>
</section>
</section>
<section id="ros2-interfaces">
<h2>ROS2 Interfaces<a class="headerlink" href="#ros2-interfaces" title="Permalink to this heading">¶</a></h2>
<section id="subscribers">
<h3>Subscribers<a class="headerlink" href="#subscribers" title="Permalink to this heading">¶</a></h3>
<dl class="simple">
<dt>~/cmd_vel [geometry_msgs/msg/TwistStamped]</dt><dd><p>Velocity command for the controller.</p>
</dd>
</dl>
<p>~/cmd_vel_unstamped [geometry_msgs::msg::Twist]</p>
<p>~/cmd_vel_out []</p>
</section>
<section id="publishers">
<h3>Publishers<a class="headerlink" href="#publishers" title="Permalink to this heading">¶</a></h3>
<p>~/odom []</p>
<p>/tf</p>
</section>
<section id="services">
<h3>Services<a class="headerlink" href="#services" title="Permalink to this heading">¶</a></h3>
</section>
</section>
<section id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this heading">¶</a></h2>
<p>Check <a class="reference external" href="https://github.com/ros-controls/ros2_controllers/blob/master/diff_drive_controller/src/diff_drive_controller_parameter.yaml">parameter definition file for details</a>.</p>
<p>Note that the documentation on parameters for joint limits can be found in <a class="reference external" href="https://github.com/ros-controls/ros2_control/blob/master/joint_limits/include/joint_limits/joint_limits_rosparam.hpp#L56-L75">their header file</a>.
Those parameters are:</p>
<dl class="simple">
<dt>linear.x [JointLimits structure]</dt><dd><p>Joint limits structure for the linear X-axis.
The limiter ignores position limits.
For details see <code class="docutils literal notranslate"><span class="pre">joint_limits</span></code> package from ros2_control repository.</p>
</dd>
<dt>angular.z [JointLimits structure]</dt><dd><p>Joint limits structure for the rotation about Z-axis.
The limiter ignores position limits.
For details see <code class="docutils literal notranslate"><span class="pre">joint_limits</span></code> package from ros2_control repository.</p>
</dd>
</dl>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../../forward_command_controller/doc/userdoc.html" class="btn btn-neutral float-right" title="forward_command_controller" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../../doc/writing_new_controller.html" class="btn btn-neutral float-left" title="Writing a new controller" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2023, ros2_control Maintainers.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: master
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>ros2_control - Rolling</dt>
      <dd><a href="userdoc.html">Master (latest)</a></dd>
    </dl>
    <dl>
      <dt>ros2_control - Foxy and Galactic</dt>
        <dd><a href="../../../../../galactic/doc/ros2_controllers/diff_drive_controller/doc/userdoc.html">Galactic (recommended)</a></dd><br>
        <dd><a href="../../../../../foxy/doc/ros2_controllers/diff_drive_controller/doc/userdoc.html">Foxy</a></dd><br>
    </dl>
  </div>
</div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>